<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Hoofdstuk: MySQL Database Transacties</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge {
  color: #faf6e4;
  background-color: #122b3b;
}
pre.rouge .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
pre.rouge .gp {
  color: #a8e1fe;
  font-weight: bold;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6c8b9f;
  font-style: italic;
}
pre.rouge .cp {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .err {
  color: #fefeec;
  background-color: #cc0000;
}
pre.rouge .gr {
  color: #cc0000;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kv {
  color: #f6dd62;
  font-weight: bold;
}
pre.rouge .o, pre.rouge .ow {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .p, pre.rouge .pi {
  color: #4df4ff;
}
pre.rouge .gd {
  color: #cc0000;
}
pre.rouge .gi {
  color: #b2fd6d;
}
pre.rouge .ge {
  font-style: italic;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
pre.rouge .kc {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .kn {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .gh {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .gu {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .no {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nc {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nd {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nn {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .bp {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .ne {
  color: #b2fd6d;
  font-weight: bold;
}
pre.rouge .nl {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .nt {
  color: #ffb000;
  font-weight: bold;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .ld {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .ss {
  color: #f696db;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sb, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .sh, pre.rouge .sx, pre.rouge .sr, pre.rouge .s1 {
  color: #fff0a6;
  font-weight: bold;
}
pre.rouge .sa {
  color: #f6dd62;
  font-weight: bold;
}
pre.rouge .se {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .sc {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .si {
  color: #4df4ff;
  font-weight: bold;
}
pre.rouge .nb {
  font-weight: bold;
}
pre.rouge .ni {
  color: #999999;
  font-weight: bold;
}
pre.rouge .w {
  color: #BBBBBB;
}
pre.rouge .go {
  color: #BBBBBB;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a8e1fe;
}
pre.rouge .py {
  color: #a8e1fe;
}
pre.rouge .na {
  color: #a8e1fe;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #a8e1fe;
  font-weight: bold;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Hoofdstuk: MySQL Database Transacties</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_wat_is_een_transactie">1. Wat is een Transactie?</a></li>
<li><a href="#_starten_van_een_transactie">2. Starten van een Transactie</a></li>
<li><a href="#_commit_en_rollback">3. Commit en Rollback</a></li>
<li><a href="#_voorbeeld_transactie_in_mysql">4. Voorbeeld: Transactie in MySQL</a></li>
<li><a href="#_autocommit_en_mysql">5. Autocommit en MySQL</a></li>
<li><a href="#_concurrerende_transacties_en_isolatie">6. Concurrerende Transacties en Isolatie</a></li>
<li><a href="#_race_conditions_in_mysql_transacties">7. Race Conditions in MySQL Transacties</a></li>
<li><a href="#_deadlocks_in_mysql_transacties">8. Deadlocks in MySQL Transacties</a></li>
<li><a href="#_mysql_savepoints_in_transactions">9. MySQL Savepoints in Transactions</a>
<ul class="sectlevel2">
<li><a href="#_wat_zijn_savepoints">9.1. Wat zijn Savepoints?</a></li>
<li><a href="#_hoe_werken_savepoints">9.2. Hoe werken Savepoints?</a></li>
<li><a href="#_voorbeeld_van_savepoints">9.3. Voorbeeld van Savepoints</a></li>
<li><a href="#_voordelen_van_savepoints">9.4. Voordelen van Savepoints</a></li>
</ul>
</li>
<li><a href="#_conclusie">10. Conclusie</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In dit hoofdstuk behandelen we MySQL transacties, een onderdeel van databases die ervoor zorgen dat groepen van gerelateerde SQL-queries betrouwbaar worden uitgevoerd.
Transacties bieden garanties over de <mark>integriteit van de gegevens</mark> en zorgen ervoor dat bewerkingen worden voltooid zoals bedoeld.
Dit is vooral belangrijk bij complexe bewerkingen of als er meerdere gebruikers tegelijkertijd toegang hebben tot de database.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wat_is_een_transactie">1. Wat is een Transactie?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Een transactie is een reeks van één of meerdere SQL-operaties die <mark>als een enkel geheel worden uitgevoerd</mark>.
Het belangrijkste doel van transacties is om te garanderen dat een reeks bewerkingen wordt uitgevoerd zonder onderbrekingen of fouten, zelfs als er iets misgaat, zoals een systeemcrash.</p>
</div>
<div class="paragraph">
<p>De vier fundamentele eigenschappen van een transactie staan bekend als de ACID-eigenschappen:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Atomiciteit</strong>: De transactie wordt als één enkele eenheid uitgevoerd. Ofwel worden alle bewerkingen uitgevoerd, ofwel geen enkele (alles of niets-principe).</p>
</li>
<li>
<p><strong>Consistentie</strong>: Een transactie begint met een geldige toestand van de database en eindigt met een geldige toestand, wat betekent dat de integriteit van de gegevens behouden blijft.</p>
</li>
<li>
<p><strong>Isolatie</strong>: Transacties worden onafhankelijk van elkaar uitgevoerd. De resultaten van een transactie zijn niet zichtbaar voor andere transacties totdat deze is voltooid.</p>
</li>
<li>
<p><strong>Duurzaamheid</strong>: Zodra een transactie is voltooid (gecommit), blijven de resultaten permanent, zelfs bij een storing.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starten_van_een_transactie">2. Starten van een Transactie</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In MySQL beginnen transacties standaard niet automatisch. Je moet expliciet een transactie starten met het <code>START TRANSACTION</code>-commando.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dit commando geeft aan dat een nieuwe transactie begint.
Alle daaropvolgende bewerkingen worden uitgevoerd binnen de context van deze transactie totdat deze wordt voltooid of teruggedraaid.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commit_en_rollback">3. Commit en Rollback</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Elke transactie eindigt met één van twee mogelijke uitkomsten:</p>
</div>
<div class="paragraph">
<p>COMMIT: Wanneer alle bewerkingen in de transactie succesvol zijn uitgevoerd, wordt de transactie "gecommit". Dit betekent dat de wijzigingen permanent worden opgeslagen in de database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">COMMIT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ROLLBACK: Als er tijdens de transactie iets misgaat (zoals een fout in de bewerkingen), kan de transactie worden teruggedraaid met het ROLLBACK-commando. Dit zorgt ervoor dat alle bewerkingen die sinds het begin van de transactie zijn uitgevoerd, worden geannuleerd.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ROLLBACK</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/transactions.gif" alt="transactions">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_voorbeeld_transactie_in_mysql">4. Voorbeeld: Transactie in MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Laten we een voorbeeld bekijken waarin we geld overboeken tussen twee bankrekeningen.
Dit scenario vereist twee updates: het afschrijven van een bedrag van de ene rekening en het bijschrijven op een andere.
Beide bewerkingen moeten als een enkele transactie worden uitgevoerd om te voorkomen dat er fouten optreden, zoals een negatieve balans als slechts één van de twee bewerkingen slaagt.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>

<span class="k">UPDATE</span> <span class="n">accounts</span>
<span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">100</span>
<span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">UPDATE</span> <span class="n">accounts</span>
<span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="mi">100</span>
<span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">COMMIT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dit voorbeeld:</p>
</div>
<div class="paragraph">
<p>We beginnen met START TRANSACTION.
Vervolgens passen we twee updates toe op de tabel accounts.
Als beide updates slagen, wordt de transactie gecommit en worden de wijzigingen permanent opgeslagen.
Als er echter iets fout gaat, zoals een foutieve account-ID, kunnen we de transactie terugdraaien:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>

<span class="k">UPDATE</span> <span class="n">accounts</span>
<span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">100</span>
<span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">UPDATE</span> <span class="n">accounts</span>
<span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="mi">100</span>
<span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">999</span><span class="p">;</span>  <span class="c1">-- Ongeldige account ID</span>

<span class="k">ROLLBACK</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dit geval zorgt het ROLLBACK-commando ervoor dat de eerste update (het afschrijven van 100 euro) wordt teruggedraaid omdat de tweede bewerking niet kon worden uitgevoerd.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autocommit_en_mysql">5. Autocommit en MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In MySQL worden alle bewerkingen standaard direct uitgevoerd zonder een expliciete transactie (dit heet autocommit).
Dit betekent dat elke SQL-query die je uitvoert automatisch wordt gecommit.
Als je transacties wilt gebruiken, moet je autocommit uitschakelen of expliciet een transactie starten.</p>
</div>
<div class="paragraph">
<p>Je kunt autocommit uitschakelen met de volgende SQL-query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SET</span> <span class="n">autocommit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nadat autocommit is uitgeschakeld, kun je transacties handmatig beginnen en beëindigen met START TRANSACTION, COMMIT, en ROLLBACK.</p>
</div>
<div class="paragraph">
<p>Om autocommit weer in te schakelen, gebruik je:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SET</span> <span class="n">autocommit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concurrerende_transacties_en_isolatie">6. Concurrerende Transacties en Isolatie</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Wanneer meerdere transacties tegelijkertijd worden uitgevoerd, kunnen er conflicten optreden, zoals race-conditions of deadlocks.
Om de integriteit van de gegevens te waarborgen, gebruikt MySQL zogenaamde isolatieniveaus.
Het isolatieniveau bepaalt hoe transacties elkaar beïnvloeden wanneer ze gelijktijdig worden uitgevoerd.</p>
</div>
<div class="paragraph">
<p>MySQL biedt vier isolatieniveaus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>READ UNCOMMITTED: Transacties kunnen elkaars nog niet-gecommitteerde wijzigingen zien.</p>
</li>
<li>
<p>READ COMMITTED: Transacties kunnen alleen gecommitteerde wijzigingen zien.</p>
</li>
<li>
<p>REPEATABLE READ: Een transactie ziet dezelfde rijen, zelfs als andere transacties wijzigingen hebben doorgevoerd.</p>
</li>
<li>
<p>SERIALIZABLE: Transacties worden volledig geïsoleerd van elkaar, wat zorgt voor de hoogste mate van isolatie maar ook voor de laagste efficiëntie.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Je kunt het isolatieniveau van een transactie instellen met de volgende SQL-query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SET</span> <span class="n">TRANSACTION</span> <span class="k">ISOLATION</span> <span class="k">LEVEL</span> <span class="k">SERIALIZABLE</span><span class="p">;</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_race_conditions_in_mysql_transacties">7. Race Conditions in MySQL Transacties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Een <strong>race condition</strong> ontstaat wanneer twee of meer transacties tegelijkertijd proberen dezelfde gegevens te lezen en te schrijven, wat kan leiden tot onverwachte resultaten of foutieve gegevens.
Dit gebeurt vaak in scenario&#8217;s waar de transacties geen rekening houden met de wijzigingen die de andere transacties tegelijkertijd doorvoeren.</p>
</div>
<div class="paragraph">
<p>Een race condition kan bijvoorbeeld optreden wanneer twee gebruikers tegelijkertijd proberen geld over te maken van dezelfde bankrekening, zonder dat de transacties goed gesynchroniseerd zijn.</p>
</div>
<div class="paragraph">
<p>Laten we een voorbeeld bekijken:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Transactie 1: Gebruiker A probeert €100 van rekening 1 af te halen</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">balance</span> <span class="k">FROM</span> <span class="n">accounts</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">-- Uitkomst: 1000</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="c1">-- Transactie 2: Gebruiker B probeert tegelijkertijd €200 van dezelfde rekening af te halen</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">balance</span> <span class="k">FROM</span> <span class="n">accounts</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">-- Uitkomst: 1000</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">200</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dit voorbeeld:
- Beide transacties lezen eerst het saldo van de rekening (1000 euro).
- Daarna berekenen ze elk afzonderlijk het nieuwe saldo op basis van hun transacties.
- Gebruiker A trekt 100 euro af en gebruiker B trekt 200 euro af, maar omdat de transacties onafhankelijk werken, weten ze niet van elkaar dat er al een bewerking is uitgevoerd.</p>
</div>
<div class="paragraph">
<p>De race condition ontstaat omdat beide transacties beginnen met dezelfde waarde (1000 euro) en er geen synchronisatie is tussen de transacties. Als ze beide succesvol worden gecommit, kan het eindresultaat fout zijn. In plaats van een saldo van 700 euro (zoals verwacht als beide correct zijn uitgevoerd), kunnen we eindigen met een saldo van 900 of 800 euro, afhankelijk van welke transactie als laatste commit.</p>
</div>
<div class="paragraph">
<p>Dit soort problemen kan worden voorkomen door een hoger isolatieniveau te gebruiken, zoals <strong>SERIALIZABLE</strong>, waardoor transacties in een bepaalde volgorde worden uitgevoerd en er geen race conditions kunnen optreden. Hiermee worden transacties volledig geïsoleerd, zodat één transactie wordt voltooid voordat een andere begint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SET</span> <span class="n">TRANSACTION</span> <span class="k">ISOLATION</span> <span class="k">LEVEL</span> <span class="k">SERIALIZABLE</span><span class="p">;</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Door dit isolatieniveau te gebruiken, zou MySQL voorkomen dat de tweede transactie tegelijkertijd plaatsvindt, en zou het juiste saldo worden berekend nadat de eerste transactie is voltooid.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deadlocks_in_mysql_transacties">8. Deadlocks in MySQL Transacties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Een <strong>deadlock</strong> treedt op wanneer twee of meer transacties elkaar blokkeren doordat ze op elkaar wachten om bronnen vrij te geven.</p>
</div>
<div class="paragraph">
<p>Elke transactie heeft een bron vergrendeld die de andere transacties nodig hebben om verder te gaan.
Dit leidt ertoe dat geen van de transacties kan worden voltooid, omdat ze in een wederzijdse blokkering terechtkomen.
Deadlocks kunnen voorkomen in situaties waarin meerdere transacties tegelijkertijd proberen dezelfde bronnen te vergrendelen, maar in een andere volgorde.</p>
</div>
<div class="paragraph">
<p>Laten we een voorbeeld bekijken:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Transactie 1</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="c1">-- Transactie 2</span>
<span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="n">accounts</span> <span class="k">SET</span> <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="mi">100</span> <span class="k">WHERE</span> <span class="n">account_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dit voorbeeld gebeurt het volgende:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transactie 1 vergrendelt rekening 1 en wacht om rekening 2 te vergrendelen.</p>
</li>
<li>
<p>Transactie 2 vergrendelt rekening 2 en wacht om rekening 1 te vergrendelen.</p>
</li>
<li>
<p>Beide transacties kunnen nu niet doorgaan, omdat ze wachten op elkaar om hun bron vrij te geven.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dit creëert een deadlock.</p>
</div>
<div class="paragraph">
<p>MySQL zal één van de transacties detecteren en deze beëindigen om de deadlock op te lossen.
De andere transactie kan dan doorgaan en worden voltooid.</p>
</div>
<div class="paragraph">
<p>Deadlocks zijn lastig te voorkomen, vooral in systemen met veel gelijktijdige transacties.
Een manier om deadlocks te minimaliseren is door ervoor te zorgen dat transacties altijd dezelfde volgorde van bronnen volgen.
Daarnaast is het belangrijk om transacties zo kort mogelijk te houden, zodat de kans op vergrendelingen afneemt.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_savepoints_in_transactions">9. MySQL Savepoints in Transactions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wat_zijn_savepoints">9.1. Wat zijn Savepoints?</h3>
<div class="paragraph">
<p>Savepoints zijn punten binnen een transactie waarnaar je kunt terugkeren zonder de volledige transactie terug te draaien. Ze bieden meer flexibiliteit bij het beheer van transacties, vooral bij complexe operaties, door een gedeeltelijke "rollback" mogelijk te maken. Dit betekent dat je specifieke delen van een transactie kunt herstellen terwijl andere delen ongewijzigd blijven.</p>
</div>
<div class="paragraph">
<p>Savepoints worden voornamelijk gebruikt in situaties waarin je meerdere stappen in een transactie uitvoert, maar slechts een deel van die stappen wilt terugdraaien als er iets misgaat.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hoe_werken_savepoints">9.2. Hoe werken Savepoints?</h3>
<div class="paragraph">
<p>Een savepoint creëert een herstelpunt binnen een transactie. Mocht er een fout optreden na een savepoint, dan kun je teruggaan naar dat savepoint en de wijzigingen vanaf dat punt terugdraaien, terwijl de wijzigingen die ervoor zijn gemaakt behouden blijven.</p>
</div>
<div class="paragraph">
<p>In MySQL kun je met <code>SAVEPOINT</code> een savepoint maken, met <code>ROLLBACK TO SAVEPOINT</code> terugkeren naar een eerder ingesteld savepoint, en met <code>RELEASE SAVEPOINT</code> een savepoint vrijgeven.</p>
</div>
</div>
<div class="sect2">
<h3 id="_voorbeeld_van_savepoints">9.3. Voorbeeld van Savepoints</h3>
<div class="paragraph">
<p>Laten we een voorbeeld bekijken waarin we savepoints gebruiken om te voorkomen dat een hele transactie wordt teruggedraaid:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>

<span class="c1">-- Voeg een nieuwe klant toe</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">customers</span> <span class="p">(</span><span class="n">customer_id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'Alice'</span><span class="p">);</span>
<span class="n">SAVEPOINT</span> <span class="n">sp1</span><span class="p">;</span>  <span class="c1">-- Savepoint na de eerste insert</span>

<span class="c1">-- Voeg een bestelling toe</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">orders</span> <span class="p">(</span><span class="n">order_id</span><span class="p">,</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
<span class="n">SAVEPOINT</span> <span class="n">sp2</span><span class="p">;</span>  <span class="c1">-- Savepoint na de tweede insert</span>

<span class="c1">-- Voeg een betaling toe, maar er is een fout</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">payments</span> <span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="s1">'wrong_amount'</span><span class="p">);</span>

<span class="c1">-- Er is een fout opgetreden, rollback naar sp2</span>
<span class="k">ROLLBACK</span> <span class="k">TO</span> <span class="n">SAVEPOINT</span> <span class="n">sp2</span><span class="p">;</span>

<span class="c1">-- Corrigeer de fout en voeg de betaling correct in</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">payments</span> <span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>

<span class="c1">-- Maak de transactie af</span>
<span class="k">COMMIT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In dit voorbeeld:
. We beginnen de transactie met <code>START TRANSACTION</code>.
. Twee savepoints (<code>sp1</code> en <code>sp2</code>) worden ingesteld.
. Wanneer er een fout optreedt tijdens het invoegen van de betaling, keren we terug naar <code>sp2</code>, zonder de klant of de bestelling terug te draaien.
. Na het corrigeren van de fout wordt de transactie succesvol afgerond met <code>COMMIT</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_voordelen_van_savepoints">9.4. Voordelen van Savepoints</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Fijnmazige controle</strong>: Savepoints bieden meer controle binnen een transactie, zodat je niet de volledige transactie hoeft terug te draaien wanneer zich een fout voordoet.</p>
</li>
<li>
<p><strong>Betere foutafhandeling</strong>: Savepoints maken het eenvoudiger om gedeeltelijke fouten in complexe transacties te beheren.</p>
</li>
<li>
<p><strong>Flexibiliteit</strong>: Je kunt bepaalde delen van een transactie terugdraaien zonder de rest aan te tasten.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusie">10. Conclusie</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Transacties waarborgen de integriteit van gegevens in MySQL-databases.
Ze stellen je in staat om meerdere bewerkingen als een geheel uit te voeren, zodat je de zekerheid hebt dat alle bewerkingen succesvol zijn uitgevoerd, of dat geen enkele wijziging wordt doorgevoerd bij fouten.
Het begrijpen van transacties, isolatieniveaus en het omgaan met deadlocks is cruciaal voor het beheren van veilige en consistente databases.</p>
</div>
</div>
</div>
</div>
</body>
</html>